{% extends "base.html" %}
{% block content %}

  {# Hero #}
  {% if settings and settings.hero_title %}
  <section class="mx-auto max-w-5xl px-4 py-8 text-center">
    <h1 class="text-3xl font-serif">{{ settings.hero_title }}</h1>
    {% if settings.hero_subtitle %}
      <p class="mt-2 text-gray-600">{{ settings.hero_subtitle }}</p>
    {% endif %}
  </section>
  {% endif %}

  {# Bėganti prekių ženklų juosta #}
  {% if brands %}
  <section class="overflow-x-auto whitespace-nowrap py-3 opacity-80 text-sm">
    {% for b in brands %} {{ b.name }} ·{% endfor %}
  </section>
  {% endif %}

  {# Kortelių tinklelis (3 per eilę, vidurinė didesnė) #}
  <section class="mx-auto max-w-6xl px-4 py-10">
    <h2 class="text-2xl font-serif mb-6">MUST READ</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {% for post, variant in grid|slice:":6" %}
        <article class="{% if variant == 'large' %}md:col-span-2 md:row-span-2{% endif %}">
          <a href="#post-{{ post.slug }}">
            {% if post.image %}<img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-auto">{% endif %}
          </a>
          <h3 class="mt-3">{{ post.title }}</h3>
          <a class="underline text-sm" href="#post-{{ post.slug }}">Skaityti daugiau</a>
        </article>
      {% endfor %}
    </div>
  </section>

  {# Pilni straipsniai apačioje #}
  <section class="mx-auto max-w-3xl px-4 pb-16">
    {% for post in posts %}
      <article id="post-{{ post.slug }}" class="mb-16">
        {% if post.image %}<img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-auto mb-4">{% endif %}
        <h2 class="text-2xl font-semibold mb-3">{{ post.title }}</h2>
        <div class="prose">
          {{ post.body|safe }}
        </div>
      </article>
    {% endfor %}
  </section>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    if (location.hash) {
      const el = document.querySelector(location.hash);
      if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
  </script>
{% endblock %}
